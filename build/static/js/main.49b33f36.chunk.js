(this["webpackJsonpsnake-game-react"]=this["webpackJsonpsnake-game-react"]||[]).push([[0],{21:function(t,e,n){},25:function(t,e,n){"use strict";n.r(e);var o,a,i,r=n(0),s=n(13),c=n.n(s),l=(n(21),n(3)),f=n(4),h=n(8),d=n(7),u=n(5),p=n(6),v=p.a.div(o||(o=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n"]))),k=p.a.div(a||(a=Object(u.a)(["\n  text-align: center;\n  .btn-play{\n\t\tdisplay: block;\n\t\twidth: 50px;\n\t\theight: 26px;\n\t\tline-height: 26px;\n\t\tcursor: pointer;\n    margin: 0 auto 6px;\n\t\tbackground-color: #fff;\n\t\tcolor: #000;\n\t\tborder: 1px solid #aaa;\n\t\tborder-radius: 6px;\n\t\ttransition: all .2s;\n  }\n\t.btn-play:hover{\n\t\tbackground-color: #ccc;\n\t\tcolor: #000;\n\t}\n\t.btn-play:active{\n\t\ttransform: scale(.9);\n\t}\n  .tips-text{\n    color: #f00;\n    padding: 6px 0;\n  }\n"]))),b=n(1),j=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"clickPlayGame",value:function(){this.props.playGame()}},{key:"render",value:function(){var t=this;return Object(b.jsxs)(k,{children:[Object(b.jsx)("span",{className:"btn-play",onClick:function(e){t.clickPlayGame()},children:"\u5f00\u59cb"}),Object(b.jsxs)("p",{children:["\u5f97\u5206\uff1a",this.props.score]}),Object(b.jsx)("p",{className:"tips-text",children:"\u63d0\u793a\uff1a\u952e\u76d8 \u2191 \u2193 \u2190 \u2192 \u63a7\u5236\u86c7\u65b9\u5411"})]})}}]),n}(r.PureComponent),m=n(2),g=function(t,e,n){var o=Math.floor(Math.random()*t),a=Math.floor(Math.random()*e),i=Math.floor(Math.random()*n);return"rgb(".concat(o,",").concat(a,",").concat(i,")")},x=p.a.div(i||(i=Object(u.a)(["\n  width: 500px;\n  height: 500px;\n  border: 2px solid #f00;\n  overflow: hidden;\n  position: relative;\n  .snake-item{\n    position: absolute;\n    width: 10px;\n    height: 10px;\n    overflow: hidden;\n    text-indent: -9999px;\n    background-color: #000;\n\t\t&.red{\n\t\t\tbackground-color: #f00;\n\t\t}\n  }\n  .food{\n    position: absolute;\n    left: ",";\n    top: ",";\n    width: 10px;\n    height: 10px;\n    overflow: hidden;\n    text-indent: -9999px;\n    background-color: ",";\n  }\n"])),(function(t){return t.foodLeft+"px"}),(function(t){return t.foodTop+"px"}),(function(t){return t.foodBgColor})),O=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(t){var o;return Object(l.a)(this,n),(o=e.call(this,t)).state={seed:200,direction:"right",snakePositions:[{top:0,left:0}],foodTop:-9999,foodLeft:-9999,foodBgColor:"#000",timeInterval:null},o}return Object(f.a)(n,[{key:"initGame",value:function(){this.randomFood(),this.snakeContorl(),clearInterval(this.state.timeInterval),this.setState({direction:"right",snakePositions:[{top:0,left:0}]})}},{key:"playGame",value:function(){var t=this,e=this.state.seed,n=setInterval((function(e){t.snakeKill()?t.gameOver():(t.eatFood(),t.snakeMove())}),e);this.setState({timeInterval:n})}},{key:"snakeMove",value:function(){var t=this.state,e=t.snakePositions,n=t.direction,o=e[e.length-1].top,a=e[e.length-1].left;"right"===n?this.setState((function(t){var e=Object(m.a)(t.snakePositions),n={top:o,left:a+10};return e.push(n),e.shift(),{snakePositions:e}})):"left"===n?this.setState((function(t){var e=Object(m.a)(t.snakePositions),n={top:o,left:a-10};return e.push(n),e.shift(),{snakePositions:e}})):"bottom"===n?this.setState((function(t){var e=Object(m.a)(t.snakePositions),n={top:o+10,left:a};return e.push(n),e.shift(),{snakePositions:e}})):"top"===n&&this.setState((function(t){var e=Object(m.a)(t.snakePositions),n={top:o-10,left:a};return e.push(n),e.shift(),{snakePositions:e}}))}},{key:"randomFood",value:function(){var t=10*Math.floor(490*Math.random()/10),e=10*Math.floor(490*Math.random()/10);this.setState({foodLeft:e,foodTop:t});var n=g(200,200,200);this.setState({foodBgColor:n})}},{key:"eatFood",value:function(){var t=this.state,e=t.snakePositions,n=t.foodTop,o=t.foodLeft;e[e.length-1].top===n&&e[e.length-1].left===o&&(this.props.handleScore(),this.handleSnakeLength(),this.randomFood())}},{key:"handleSnakeLength",value:function(){var t=this.state,e=t.snakePositions,n=t.direction,o={},a=e[0].top,i=e[0].left;"right"===n?(o.top=a,o.left=i-10):"left"===n?(o.top=a,o.left=i+10):"bottom"===n?(o.top=a-10,o.left=i):"top"===n&&(o.top=a+10,o.left=i),this.setState((function(t){var e=Object(m.a)(t.snakePositions);return e.unshift(o),{snakePositions:e}}))}},{key:"snakeKill",value:function(){var t=this.state.snakePositions,e=t[t.length-1].top,n=t[t.length-1].left;if(e<0||e>490||n<0||n>490)return!0;var o=Object(m.a)(t);for(var a in o.pop(),o)if(e===o[a].top&&n===o[a].left)return!0;return!1}},{key:"gameOver",value:function(){alert("\u6e38\u620f\u7ed3\u675f"),clearInterval(this.state.timeInterval)}},{key:"snakeContorl",value:function(){var t=this;window.onkeydown=function(e){t.setState((function(t){var n=t.direction;return 38===e.keyCode&&"bottom"!==t.direction?n="top":40===e.keyCode&&"top"!==t.direction?n="bottom":37===e.keyCode&&"right"!==t.direction?n="left":39===e.keyCode&&"left"!==t.direction&&(n="right"),{direction:n}}))}}},{key:"render",value:function(){var t=this.state,e=t.snakePositions,n=t.foodTop,o=t.foodLeft,a=t.foodBgColor;return Object(b.jsxs)(x,{foodTop:n,foodLeft:o,foodBgColor:a,children:[e.map((function(t,n){return Object(b.jsx)("div",{className:"snake-item "+(n===e.length-1?"red":""),style:{top:t.top,left:t.left},children:"\u86c7\u8eab"},n)})),Object(b.jsx)("div",{className:"food",children:"\u98df\u7269"})]})}}]),n}(r.PureComponent),y=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(t){var o;return Object(l.a)(this,n),(o=e.call(this,t)).state={score:0},o.refContent=Object(r.createRef)(),o}return Object(f.a)(n,[{key:"playGame",value:function(){this.setState({score:0},(function(){this.refContent.current.initGame(),this.refContent.current.playGame()}))}},{key:"handleScore",value:function(){this.setState((function(t){return{score:t.score+1}}))}},{key:"render",value:function(){var t=this;return Object(b.jsxs)(v,{children:[Object(b.jsx)(j,{playGame:function(e){t.playGame()},score:this.state.score}),Object(b.jsx)(O,{ref:this.refContent,handleScore:function(){t.handleScore()}})]})}}]),n}(r.PureComponent),P=Object(r.memo)((function(){return Object(b.jsx)("div",{children:Object(b.jsx)(y,{})})}));c.a.render(Object(b.jsx)(P,{}),document.getElementById("root"))}},[[25,1,2]]]);